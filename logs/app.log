2025-11-13 10:03:12 [clientInboundChannel-32] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.sendPrivate(ChatController.java:42)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:03:35 [clientInboundChannel-34] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.sendPrivate(ChatController.java:42)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:11:26 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 10:11:26 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 17792 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 10:11:26 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 10:11:26 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 10:11:26 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 10:11:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:11:31 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 908 ms. Found 13 JPA repository interfaces.
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.chat.ChatMessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:11:32 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 137 ms. Found 0 Redis repository interfaces.
2025-11-13 10:11:36 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 10:11:36 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:11:36 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 10:11:36 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 10:11:37 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 10:11:37 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 10450 ms
2025-11-13 10:11:38 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 10:11:40 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@40614626
2025-11-13 10:11:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 10:11:41 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 10:11:41 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 8 migrations (execution time 00:00.306s)
2025-11-13 10:11:41 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 8
2025-11-13 10:11:41 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 10:11:42 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 10:11:42 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 10:11:42 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 10:11:43 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 10:11:43 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 10:11:43 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 10:11:49 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 10:11:49 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:11:50 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 10:11:54 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 10:11:55 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 10:11:55 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 10:11:55 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41751f9f]]
2025-11-13 10:11:55 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 10:11:55 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 10:11:55 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 10:11:55 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 30.213 seconds (process running for 31.312)
2025-11-13 10:12:18 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 10:12:18 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 10:12:18 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-13 10:12:18 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@51245d77, simpSessionId=uks3kv2m}], simpSessionId=uks3kv2m}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:12:18 [clientInboundChannel-7] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:87)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:12:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:12:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:12:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:18 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:19 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:12:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:12:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:12:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:12:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:12:34 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:12:39 [clientInboundChannel-10] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.sendPrivate(ChatController.java:42)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:12:55 [MessageBroker-4] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 1 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(1)-CONNECTED(1)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 12, active threads = 0, queued tasks = 0, completed tasks = 12], outboundChannel[pool size = 1, active threads = 0, queued tasks = 0, completed tasks = 1], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 2, completed tasks = 9]
2025-11-13 10:15:36 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-13 10:15:36 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 10:15:36 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:15:36 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 10:15:36 [Thread-5] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-13 10:15:36 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-13 10:15:36 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@41751f9f]]
2025-11-13 10:15:36 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-13 10:15:36 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:15:36 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-13 10:15:36 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-13 10:15:37 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 17792 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 10:15:37 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 10:15:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:15:39 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 10:15:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 896 ms. Found 13 JPA repository interfaces.
2025-11-13 10:15:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:15:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 10:15:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.chat.ChatMessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:40 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:15:41 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 166 ms. Found 0 Redis repository interfaces.
2025-11-13 10:15:41 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 10:15:41 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:15:42 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 10:15:42 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 10:15:42 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 10:15:42 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5153 ms
2025-11-13 10:15:42 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-13 10:15:42 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@2d1782aa
2025-11-13 10:15:42 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-13 10:15:42 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 10:15:42 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 8 migrations (execution time 00:00.051s)
2025-11-13 10:15:42 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 8
2025-11-13 10:15:42 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 10:15:42 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 10:15:42 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 10:15:42 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 10:15:42 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 10:15:42 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 10:15:44 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 10:15:44 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:15:45 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 10:15:46 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 10:15:46 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 10:15:46 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4b451b5b]]
2025-11-13 10:15:46 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 10:15:46 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 10:15:46 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 10:15:46 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 9.379 seconds (process running for 261.516)
2025-11-13 10:15:46 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-13 10:15:50 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 10:15:50 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 10:15:50 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:50 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@342f7518, simpSessionId=bqgsyc4l}], simpSessionId=bqgsyc4l}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:50 [clientInboundChannel-7] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:15:53 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@2786a4d4, simpSessionId=b3vr3gob}], simpSessionId=b3vr3gob}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:15:53 [clientInboundChannel-2] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:53 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:15:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:15:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:15:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:15:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:56 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:15:59 [clientInboundChannel-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:15:59 [clientInboundChannel-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:59 [clientInboundChannel-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:15:59 [clientInboundChannel-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:15:59 [clientInboundChannel-6] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:16:46 [MessageBroker-1] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 24], outboundChannel[pool size = 3, active threads = 0, queued tasks = 0, completed tasks = 3], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 2, completed tasks = 14]
2025-11-13 10:17:00 [http-nio-8080-exec-2] WARN  c.t.s.a.token.TokenServiceImpl - Invalid token: Invalid serialized unsecured/JWS/JWE object: Missing part delimiters
2025-11-13 10:17:00 [http-nio-8080-exec-2] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
org.springframework.security.authentication.AuthenticationServiceException: Token introspection failed
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:106)
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:144)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1776)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:975)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:493)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.springframework.security.oauth2.jwt.JwtException: Token introspection failed
	at com.transport.config.CustomJWTDecoder.decode(CustomJWTDecoder.java:40)
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99)
	... 68 common frames omitted
2025-11-13 10:17:00 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer null], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@7e9e1de4, simpSessionId=tgyc3git}], simpSessionId=tgyc3git}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:17:00 [clientInboundChannel-23] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:17:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:17:16 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:16 [http-nio-8080-exec-7] WARN  o.s.w.s.m.m.a.ExceptionHandlerExceptionResolver - Resolved [com.transport.exception.AppException: Sai tài khoản hoặc mật khẩu]
2025-11-13 10:17:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:17:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:20 [http-nio-8080-exec-10] INFO  c.t.s.a.token.TokenServiceImpl - signerKey: bvkfSG5tgcc6kHcMWz6VpgyEjCmg16w8EzZv5mPs3KT4Tt1lS3AhkkOBE3oabTJ8 
2025-11-13 10:17:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.role_name,r1_1.description from user_roles r1_0 join roles r1_1 on r1_1.role_name=r1_0.role_name where r1_0.user_id=?
2025-11-13 10:17:20 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select p1_0.role_name,p1_1.permission_name,p1_1.description from role_permissions p1_0 join permissions p1_1 on p1_1.permission_name=p1_0.permission_name where p1_0.role_name=?
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:22 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@4ba53496, simpSessionId=tnbzzha1}], simpSessionId=tnbzzha1}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:22 [clientInboundChannel-19] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:22 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:17:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:17:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:17:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:17:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:23 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:17:27 [clientInboundChannel-24] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:17:27 [clientInboundChannel-24] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:27 [clientInboundChannel-24] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:17:27 [clientInboundChannel-24] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:17:27 [clientInboundChannel-24] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:04 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:25:04 [clientOutboundChannel-9] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@7aacc102, simpSessionId=vnunptdi}], simpSessionId=vnunptdi}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:25:04 [clientOutboundChannel-10] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@eebee39, simpSessionId=msma0ebn}], simpSessionId=msma0ebn}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:25:07 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:25:07 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:25:07 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:07 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:25:07 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:07 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:25:14 [clientInboundChannel-45] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:25:14 [clientInboundChannel-45] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:14 [clientInboundChannel-45] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:25:14 [clientInboundChannel-45] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:14 [clientInboundChannel-45] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:25:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:25:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:25:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:25:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:19 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:25:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:25:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:25:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:20 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:25:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:21 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:25:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:25:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:25:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:25:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:21 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:25:24 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:25:24 [clientOutboundChannel-12] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@489f0dbd, simpSessionId=xsu2tl0n}], simpSessionId=xsu2tl0n}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:09 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:26:09 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:26:09 [clientOutboundChannel-15] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@13562cb9, simpSessionId=ysnbnh3h}], simpSessionId=ysnbnh3h}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:26:09 [clientInboundChannel-34] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:26:09 [clientOutboundChannel-16] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@4504a387, simpSessionId=4rvtkitf}], simpSessionId=4rvtkitf}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:26:09 [clientInboundChannel-54] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:14 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:26:14 [clientOutboundChannel-18] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@fa1cba1, simpSessionId=ne05cbhk}], simpSessionId=ne05cbhk}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:26:14 [clientInboundChannel-36] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:26:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:26:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:26:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:26:14 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:15 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:26:16 [clientInboundChannel-58] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:26:16 [clientInboundChannel-58] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:16 [clientInboundChannel-58] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:26:16 [clientInboundChannel-58] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:16 [clientInboundChannel-58] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:26:50 [clientOutboundChannel-21] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@297703c0, simpSessionId=fhljfgf5}], simpSessionId=fhljfgf5}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:26:50 [clientOutboundChannel-22] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@743fe510, simpSessionId=btpywndb}], simpSessionId=btpywndb}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:26:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:26:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:26:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:26:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:26:56 [clientInboundChannel-36] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:26:56 [clientInboundChannel-36] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:56 [clientInboundChannel-36] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:26:56 [clientInboundChannel-36] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:26:56 [clientInboundChannel-36] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:27:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:27:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:27:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:27:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:01 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:27:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:27:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:27:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:27:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:02 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:27:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:27:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:27:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:27:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:03 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:27:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:27:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:27:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:27:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:27:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:27:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:27:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:27:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:27:15 [clientInboundChannel-59] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:27:15 [clientInboundChannel-59] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:15 [clientInboundChannel-59] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:27:15 [clientInboundChannel-59] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:27:15 [clientInboundChannel-59] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:31:29 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 10:31:29 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 10180 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 10:31:29 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 10:31:29 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 10:31:29 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 10:31:35 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:31:35 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 852 ms. Found 13 JPA repository interfaces.
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.chat.ChatMessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:31:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 92 ms. Found 0 Redis repository interfaces.
2025-11-13 10:31:39 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 10:31:39 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:31:39 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 10:31:39 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 10:31:39 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 10:31:39 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 9574 ms
2025-11-13 10:31:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 10:31:41 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@73925b3
2025-11-13 10:31:41 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 10:31:42 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 10:31:42 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 8 migrations (execution time 00:00.194s)
2025-11-13 10:31:42 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 8
2025-11-13 10:31:42 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 10:31:42 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 10:31:43 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 10:31:43 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 10:31:44 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 10:31:44 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 10:31:44 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 10:31:47 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 10:31:47 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:31:49 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 10:31:53 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 10:31:56 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 10:31:56 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 10:31:56 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4643d363]]
2025-11-13 10:31:56 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 10:31:56 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 10:31:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 10:31:56 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 29.032 seconds (process running for 30.93)
2025-11-13 10:32:25 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 10:32:25 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 10:32:25 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-13 10:32:26 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@3f9cdfff, simpSessionId=1mhz3owf}], simpSessionId=1mhz3owf}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:32:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:32:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:26 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:27 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:27 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:27 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:27 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:27 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:32:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:32:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:28 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:32:30 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:30 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:30 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:30 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:30 [clientInboundChannel-4] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:32:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:37 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:37 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:32:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:32:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:38 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:32:38 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@6df1bafd, simpSessionId=nzc3kkrz}], simpSessionId=nzc3kkrz}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:32:38 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:32:38 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@72e772d4, simpSessionId=ac0htf5j}], simpSessionId=ac0htf5j}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:32:38 [clientInboundChannel-2] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:32:38 [clientInboundChannel-4] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:32:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:32:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:40 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:32:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:32:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:41 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:42 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:32:44 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:44 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:44 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:44 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:44 [clientInboundChannel-10] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:32:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:32:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:55 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:32:56 [MessageBroker-8] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 3 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(3)-CONNECTED(3)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 30], outboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 4], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 7]
2025-11-13 10:32:56 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:56 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:32:56 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:56 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:56 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:56 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:32:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:32:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:32:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:57 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:32:59 [clientInboundChannel-15] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:59 [clientInboundChannel-15] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:59 [clientInboundChannel-15] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:32:59 [clientInboundChannel-15] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:32:59 [clientInboundChannel-15] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:33:01 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@1fdc39aa, simpSessionId=b0idtpws}], simpSessionId=b0idtpws}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:01 [clientInboundChannel-12] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:01 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:33:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:33:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:33:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:33:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:02 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:33:05 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:33:05 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:05 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:33:05 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:05 [clientInboundChannel-10] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:09 [clientOutboundChannel-8] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@6f1cdfb0, simpSessionId=kc3ovuhq}], simpSessionId=kc3ovuhq}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:09 [clientInboundChannel-4] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:09 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:33:10 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:33:10 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:33:10 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:10 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:33:10 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:10 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:33:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:33:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:33:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:33:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:10 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:33:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:33:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:33:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:33:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:33:10 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:34:10 [clientInboundChannel-17] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:34:10 [clientInboundChannel-17] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:34:10 [clientInboundChannel-17] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:34:10 [clientInboundChannel-17] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:34:10 [clientInboundChannel-17] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:40:02 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-11-13 10:40:03 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 10:40:03 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:40:03 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 10:40:03 [Thread-5] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-13 10:40:03 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-13 10:40:03 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4643d363]]
2025-11-13 10:40:03 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-13 10:40:03 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:40:03 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-13 10:40:03 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-13 10:40:03 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 10180 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 10:40:03 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 10:40:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:40:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1066 ms. Found 13 JPA repository interfaces.
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.chat.ChatMessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:40:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 141 ms. Found 0 Redis repository interfaces.
2025-11-13 10:42:01 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 10:42:02 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 4036 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 10:42:02 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 10:42:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 10:42:02 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 10:42:06 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:42:06 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 10:42:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 765 ms. Found 13 JPA repository interfaces.
2025-11-13 10:42:07 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.chat.ChatMessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:42:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 91 ms. Found 0 Redis repository interfaces.
2025-11-13 10:42:11 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 10:42:11 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:42:11 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 10:42:11 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 10:42:11 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 10:42:11 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 9071 ms
2025-11-13 10:42:12 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 10:42:14 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6e955908
2025-11-13 10:42:14 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 10:42:14 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 10:42:14 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 8 migrations (execution time 00:00.208s)
2025-11-13 10:42:14 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 8
2025-11-13 10:42:14 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 10:42:15 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 10:42:15 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 10:42:15 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 10:42:16 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 10:42:17 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 10:42:17 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 10:42:19 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 10:42:19 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:42:20 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 10:42:24 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 10:42:28 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 10:42:28 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 10:42:28 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4609b11c]]
2025-11-13 10:42:28 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 10:42:28 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 10:42:28 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 10:42:28 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 28.005 seconds (process running for 29.328)
2025-11-13 10:42:52 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 10:42:52 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 10:42:52 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-13 10:42:52 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@253f2cb3, simpSessionId=ofq3jgzt}], simpSessionId=ofq3jgzt}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:42:52 [clientInboundChannel-7] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:52 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:42:54 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:42:54 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:42:54 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:54 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:42:54 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:54 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:42:57 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:42:57 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:57 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:42:57 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:42:57 [clientInboundChannel-10] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:43:14 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:43:14 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:43:14 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:14 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:15 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@3233edbb, simpSessionId=idospkvu}], simpSessionId=idospkvu}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:43:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:15 [clientInboundChannel-6] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:43:15 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:23 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@112d38b8, simpSessionId=k1gsrdai}], simpSessionId=k1gsrdai}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:23 [clientInboundChannel-15] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:23 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:43:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:43:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:43:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:43:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:25 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:43:28 [MessageBroker-5] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 3 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(3)-CONNECTED(3)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 33], outboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 4], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 8]
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:30 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@2e20aa72, simpSessionId=couen0u2}], simpSessionId=couen0u2}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:30 [clientInboundChannel-6] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:30 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:43:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:43:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:43:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:43:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:34 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:43:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:43:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:43:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:43:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:45:28 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (1 addition, 0 deletions, 0 modifications)
2025-11-13 10:45:28 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 10:45:28 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:45:28 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 10:45:28 [Thread-5] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-13 10:45:28 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-13 10:45:28 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@4609b11c]]
2025-11-13 10:45:28 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-13 10:45:28 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:45:28 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-13 10:45:28 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-13 10:45:28 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 4036 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 10:45:28 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 10:45:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:45:29 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 10:50:39 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 10:50:39 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 7044 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 10:50:39 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 10:50:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 10:50:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 10:50:42 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:50:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 10:50:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 875 ms. Found 13 JPA repository interfaces.
2025-11-13 10:50:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:50:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.chat.ChatMessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:50:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 190 ms. Found 0 Redis repository interfaces.
2025-11-13 10:50:48 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 10:50:48 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:50:48 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 10:50:48 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 10:50:48 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 10:50:48 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 9126 ms
2025-11-13 10:50:49 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 10:50:50 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5ed72f4e
2025-11-13 10:50:50 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 10:50:51 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 10:50:51 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 8 migrations (execution time 00:00.223s)
2025-11-13 10:50:51 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 8
2025-11-13 10:50:51 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 10:50:51 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 10:50:52 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 10:50:52 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 10:50:53 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 10:50:53 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 10:50:53 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 10:50:56 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 10:50:56 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:50:58 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 10:51:02 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 10:51:05 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 10:51:05 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 10:51:05 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@43fa7dc9]]
2025-11-13 10:51:05 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 10:51:05 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 10:51:05 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 10:51:05 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 28.153 seconds (process running for 30.692)
2025-11-13 10:51:11 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 10:51:11 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 10:51:11 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-13 10:51:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:51:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:51:12 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:51:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:13 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:35 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:51:35 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@1c5e6412, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002685cca1428@2cde9c4c, simpSessionId=es4rzshx}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002685cca1428@2cde9c4c, simpSessionId=es4rzshx}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:51:36 [clientInboundChannel-7] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:51:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:51:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:51:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:51:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:36 [http-nio-8080-exec-7] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:51:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:51:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:51:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:38 [clientInboundChannel-10] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:54 [clientOutboundChannel-2] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@3555db0a, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002685cca1428@3b9223d0, simpSessionId=njobbgeo}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002685cca1428@3b9223d0, simpSessionId=njobbgeo}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:54 [clientInboundChannel-1] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:88)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:54 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:51:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:51:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:51:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:51:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:51:55 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:52:02 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:52:03 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:52:03 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:03 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:52:03 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:03 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:52:05 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:52:05 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:52:05 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:05 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:52:05 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:05 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:52:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:52:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:52:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:52:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:05 [MessageBroker-7] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 2 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(2)-CONNECTED(2)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 21], outboundChannel[pool size = 2, active threads = 0, queued tasks = 0, completed tasks = 2], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 8]
2025-11-13 10:52:05 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:52:07 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:52:07 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:07 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:52:07 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:07 [clientInboundChannel-4] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:52:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:52:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:52:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:52:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:12 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:52:14 [clientInboundChannel-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:52:14 [clientInboundChannel-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:14 [clientInboundChannel-7] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:52:14 [clientInboundChannel-7] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:52:14 [clientInboundChannel-7] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:55:02 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 10:55:03 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 1264 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 10:55:03 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 10:55:03 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 10:55:03 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 10:55:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:55:08 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 721 ms. Found 13 JPA repository interfaces.
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.chat.ChatMessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:55:09 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 119 ms. Found 0 Redis repository interfaces.
2025-11-13 10:55:13 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 10:55:13 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:55:13 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 10:55:13 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 10:55:13 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 10:55:13 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 10084 ms
2025-11-13 10:55:14 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 10:55:16 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@4e13e3d4
2025-11-13 10:55:16 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 10:55:16 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 10:55:17 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 8 migrations (execution time 00:00.203s)
2025-11-13 10:55:17 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 8
2025-11-13 10:55:17 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 10:55:17 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 10:55:18 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 10:55:18 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 10:55:19 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 10:55:19 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 10:55:19 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 10:55:25 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 10:55:25 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:55:27 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 10:55:34 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 10:55:39 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 10:55:39 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 10:55:39 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3fc974fa]]
2025-11-13 10:55:39 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 10:55:39 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 10:55:39 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 10:55:39 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 37.812 seconds (process running for 40.252)
2025-11-13 10:55:44 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 10:55:44 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 10:55:44 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 9 ms
2025-11-13 10:55:48 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@6990aef1, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bcb6da0@16aed6ce, simpSessionId=p3e3uxhh}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bcb6da0@16aed6ce, simpSessionId=p3e3uxhh}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:55:48 [clientInboundChannel-7] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:89)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:55:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:55:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:55:48 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:49 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:55:50 [clientOutboundChannel-3] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@54056528, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bcb6da0@5ac291d8, simpSessionId=qqtwk4xs}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bcb6da0@5ac291d8, simpSessionId=qqtwk4xs}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:55:50 [clientInboundChannel-2] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:89)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:50 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:55:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:55:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:55:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:55:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:55:57 [clientInboundChannel-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:55:57 [clientInboundChannel-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:57 [clientInboundChannel-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:55:57 [clientInboundChannel-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:55:57 [clientInboundChannel-6] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:12 [clientOutboundChannel-5] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@30dc8219, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bcb6da0@3e1b7a72, simpSessionId=saceapxt}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bcb6da0@3e1b7a72, simpSessionId=saceapxt}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:12 [clientInboundChannel-4] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:89)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:12 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 10:56:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 10:56:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 10:56:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:56:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:13 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 10:56:16 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:56:16 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:16 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 10:56:16 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 10:56:16 [clientInboundChannel-2] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 10:56:39 [MessageBroker-8] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[1 current WS(1)-HttpStream(0)-HttpPoll(0), 3 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(3)-CONNECTED(3)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 39], outboundChannel[pool size = 5, active threads = 0, queued tasks = 0, completed tasks = 5], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 2, completed tasks = 12]
2025-11-13 10:59:53 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 1 class path change (0 additions, 0 deletions, 1 modification)
2025-11-13 10:59:53 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 10:59:53 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:59:53 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 10:59:53 [Thread-5] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-13 10:59:53 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-13 10:59:53 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@3fc974fa]]
2025-11-13 10:59:53 [Thread-5] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-13 10:59:53 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 10:59:53 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-13 10:59:53 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-13 10:59:54 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 1264 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 10:59:54 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 10:59:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:59:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 1316 ms. Found 13 JPA repository interfaces.
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.chat.ChatMessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:58 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 10:59:59 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 140 ms. Found 0 Redis repository interfaces.
2025-11-13 10:59:59 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 10:59:59 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 10:59:59 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 10:59:59 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 10:59:59 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 10:59:59 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 5212 ms
2025-11-13 11:00:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-13 11:00:00 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@5182c29
2025-11-13 11:00:00 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-13 11:00:00 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 11:00:00 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 8 migrations (execution time 00:00.058s)
2025-11-13 11:00:00 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 8
2025-11-13 11:00:00 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 11:00:00 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 11:00:00 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 11:00:00 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 11:00:00 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 11:00:00 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 11:00:02 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 11:00:02 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 11:00:03 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 11:00:04 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 11:00:04 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 11:00:04 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1a88db1a]]
2025-11-13 11:00:04 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 11:00:04 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 11:00:04 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 11:00:04 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 10.459 seconds (process running for 305.773)
2025-11-13 11:00:04 [restartedMain] INFO  o.s.b.d.a.ConditionEvaluationDeltaLoggingListener - Condition evaluation unchanged
2025-11-13 11:00:17 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 11:00:17 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 11:00:17 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:17 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 11:00:17 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@7f490227, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bf662a0@718ef3be, simpSessionId=ggttoffp}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bf662a0@718ef3be, simpSessionId=ggttoffp}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:00:17 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 11:00:17 [clientOutboundChannel-2] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@7034c9a9, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bf662a0@7ef329df, simpSessionId=rdeafpf5}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bf662a0@7ef329df, simpSessionId=rdeafpf5}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:00:17 [clientInboundChannel-10] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:00:17 [clientInboundChannel-16] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:00:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:00:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:00:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:00:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:24 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 11:00:27 [clientInboundChannel-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:00:27 [clientInboundChannel-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:27 [clientInboundChannel-1] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:00:27 [clientInboundChannel-1] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:27 [clientInboundChannel-1] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@5fa6095, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bf662a0@b3d8e5a, simpSessionId=yvp5u3pk}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bf662a0@b3d8e5a, simpSessionId=yvp5u3pk}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [clientInboundChannel-15] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:00:38 [clientOutboundChannel-6] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@4b0b469f, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bf662a0@45ccb18e, simpSessionId=gcawc0ok}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000001d81bf662a0@45ccb18e, simpSessionId=gcawc0ok}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [clientInboundChannel-9] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:38 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 11:00:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:00:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:00:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:00:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:46 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 11:00:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:00:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:00:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:00:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:50 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 11:00:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:00:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:00:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:00:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:50 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 11:00:53 [clientInboundChannel-13] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:00:53 [clientInboundChannel-13] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:53 [clientInboundChannel-13] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:00:53 [clientInboundChannel-13] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:00:53 [clientInboundChannel-13] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 11:01:04 [MessageBroker-8] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 4 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(4)-CONNECTED(4)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 48], outboundChannel[pool size = 6, active threads = 0, queued tasks = 0, completed tasks = 6], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 12]
2025-11-13 11:01:21 [SpringApplicationShutdownHook] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 11:01:21 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 11:01:21 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopping...
2025-11-13 11:01:21 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=false, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@1a88db1a]]
2025-11-13 11:01:21 [SpringApplicationShutdownHook] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Stopped.
2025-11-13 11:01:21 [SpringApplicationShutdownHook] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 11:01:21 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-13 11:01:21 [SpringApplicationShutdownHook] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-13 11:03:31 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 11:03:31 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 2724 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 11:03:31 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 11:03:31 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 11:03:31 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 11:03:35 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 11:03:35 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 350 ms. Found 13 JPA repository interfaces.
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.chat.ChatMessageRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:03:36 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 51 ms. Found 0 Redis repository interfaces.
2025-11-13 11:03:38 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 11:03:38 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 11:03:38 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 11:03:38 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 11:03:38 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 11:03:38 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 6724 ms
2025-11-13 11:03:39 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 11:03:40 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@3ebbc68f
2025-11-13 11:03:40 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 11:03:41 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 11:03:41 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 8 migrations (execution time 00:00.223s)
2025-11-13 11:03:41 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 8
2025-11-13 11:03:41 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 11:03:42 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 11:03:42 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 11:03:42 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 11:03:43 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 11:03:43 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 11:03:43 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 11:03:48 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 11:03:48 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 11:03:50 [restartedMain] INFO  o.s.d.j.r.query.QueryEnhancerFactory - Hibernate is in classpath; If applicable, HQL parser will be used.
2025-11-13 11:03:54 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 11:03:56 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 11:03:56 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Starting...
2025-11-13 11:03:56 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - BrokerAvailabilityEvent[available=true, SimpleBrokerMessageHandler [org.springframework.messaging.simp.broker.DefaultSubscriptionRegistry@15023f7f]]
2025-11-13 11:03:56 [restartedMain] INFO  o.s.m.s.b.SimpleBrokerMessageHandler - Started.
2025-11-13 11:03:56 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 11:03:56 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 11:03:56 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 26.289 seconds (process running for 27.604)
2025-11-13 11:03:59 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 11:03:59 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 11:03:59 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-13 11:04:00 [clientOutboundChannel-1] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@657de9b8, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002cfc1cb7718@6c561a3d, simpSessionId=xhkgcg5p}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002cfc1cb7718@6c561a3d, simpSessionId=xhkgcg5p}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:04:00 [clientInboundChannel-7] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:00 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 11:04:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:04:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:04:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:07 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:11 [clientOutboundChannel-2] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiZHJpdmVyMDQiLCJleHAiOjE3NjMwMTEwNDAsImlhdCI6MTc2MzAwMzg0MCwianRpIjoiYWI4NmU1NWMtMGU1MC00ODQ2LTkyY2UtMWIyYTc0ODdjY2FhIiwic2NvcGUiOiJST0xFX0RSSVZFUiBUUklQX0xJU1QgRVhQRU5TRV9SRUFEIEVYUEVOU0VfQ1JFQVRFIEVYUEVOU0VfTElTVCBUUklQX1JFQUQgU0FMQVJZX1JFQUQifQ.rXIipEII8-e2YShKH3pGt30ElxJh5VDXLvyYTMuU-IQGYPTlZyFi13EWt3PPbf4l9vtdgtrZxSO0d9E96WbeoQ], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@7a80b254, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002cfc1cb7718@74474374, simpSessionId=4ys5r5nn}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002cfc1cb7718@74474374, simpSessionId=4ys5r5nn}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:11 [clientInboundChannel-16] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:11 [http-nio-8080-exec-8] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 11:04:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:04:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:04:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:12 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 11:04:14 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:14 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:14 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:14 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:14 [clientInboundChannel-2] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 11:04:25 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:25 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:25 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:25 [clientInboundChannel-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:25 [clientInboundChannel-4] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.is_active=? order by u1_0.created_at desc limit ?,?
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:33 [clientOutboundChannel-4] ERROR o.s.w.s.m.StompSubProtocolHandler - Error publishing SessionConnectedEvent[GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT_ACK, simpConnectMessage=GenericMessage [payload=byte[0], headers={simpMessageType=CONNECT, stompCommand=CONNECT, nativeHeaders={Authorization=[Bearer eyJhbGciOiJIUzUxMiJ9.eyJpc3MiOiJjb20udHJhbnNwb3J0Iiwic3ViIjoiYWRtaW4iLCJleHAiOjE3NjMwMDg2ODMsImlhdCI6MTc2MzAwMTQ4MywianRpIjoiZmU4NjkzMjYtZjc3YS00OWFiLWEzMGYtZWNhN2JjNmE0M2ZkIiwic2NvcGUiOiJST0xFX0FETUlOIFZFSElDTEVfREVMRVRFIEVYUEVOU0VfQVBQUk9WRV9NQU5BR0VSIERSSVZFUl9MSVNUIFVTRVJfREVMRVRFIFRSSVBfQ0FOQ0VMIERSSVZFUl9DUkVBVEUgRVhQRU5TRV9DQVRFR09SWSBWRUhJQ0xFX0NSRUFURSBST1VURV9DUkVBVEUgVFJJUF9SRUFEIFNBTEFSWV9DUkVBVEUgVFJJUF9ERUxFVEUgRVhQRU5TRV9DUkVBVEUgU0FMQVJZX1VQREFURSBST1VURV9ERUxFVEUgU0FMQVJZX0RFTEVURSBFWFBFTlNFX0RFTEVURSBFWFBFTlNFX1JFQUQgVVNFUl9SRUFEIFZFSElDTEVfVFlQRSBTQUxBUllfTElTVCBST0xFIEVYUEVOU0VfQVBQUk9WRSBTQUxBUllfUkVBRCBEUklWRVJfVVBEQVRFIFZFSElDTEVfVVBEQVRFIFRSSVBfVVBEQVRFIFJFUE9SVF9FWFBPUlQgVFJJUF9DUkVBVEUgRVhQRU5TRV9BUFBST1ZFX0FDQ09VTlRBTlQgUk9VVEVfUkVBRCBEUklWRVJfUkVBRCBSRVBPUlRfVklFVyBST0xFX0RFTEVURSBST0xFX1JFQUQgUk9MRV9VUERBVEUgU0FMQVJZX0FQUFJPVkUgRVhQRU5TRV9MSVNUIEVYUEVOU0VfVVBEQVRFIFVTRVJfTElTVCBVU0VSX1VQREFURSBUUklQX0xJU1QgUk9VVEVfTElTVCBVU0VSX0NSRUFURSBWRUhJQ0xFX1JFQUQgUk9VVEVfVVBEQVRFIFRSSVBfQ09NUExFVEUgRFJJVkVSX0RFTEVURSBWRUhJQ0xFX0xJU1QgUk9MRV9DUkVBVEUgVFJJUF9BUFBST1ZFIFBFUk1JU1NJT04ifQ.j8s1TJqqMrZys-pvm4MzDmfbm629yj-ZjRRuQ5q2qWxJwpilbWQwNoQ0Oxq3Bkj7JF75Put_Xk9nSjPZi9Avpg], accept-version=[1.2,1.1,1.0], heart-beat=[4000,4000]}, simpSessionAttributes={}, simpHeartbeat=[J@6724d352, simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002cfc1cb7718@69e331c6, simpSessionId=s421tujd}], simpUser=com.transport.config.JwtChannelInterceptor$$Lambda/0x000002cfc1cb7718@69e331c6, simpSessionId=s421tujd}]]
java.lang.NullPointerException: Cannot invoke "java.util.Map.get(Object)" because the return value of "org.springframework.messaging.simp.stomp.StompHeaderAccessor.getSessionAttributes()" is null
	at com.transport.listener.WebSocketEventListener.handleWebSocketConnectListener(WebSocketEventListener.java:24)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.doInvoke(ApplicationListenerMethodAdapter.java:383)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.processEvent(ApplicationListenerMethodAdapter.java:255)
	at org.springframework.context.event.ApplicationListenerMethodAdapter.onApplicationEvent(ApplicationListenerMethodAdapter.java:174)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:185)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:178)
	at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:156)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:454)
	at org.springframework.context.support.AbstractApplicationContext.publishEvent(AbstractApplicationContext.java:387)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.publishEvent(StompSubProtocolHandler.java:448)
	at org.springframework.web.socket.messaging.StompSubProtocolHandler.handleMessageToClient(StompSubProtocolHandler.java:492)
	at org.springframework.web.socket.messaging.SubProtocolWebSocketHandler.handleMessage(SubProtocolWebSocketHandler.java:387)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:04:33 [http-nio-8080-exec-10] DEBUG org.hibernate.SQL - select count(u1_0.id) from users u1_0 where u1_0.is_active=?
2025-11-13 11:04:33 [clientInboundChannel-16] ERROR o.s.w.s.m.WebSocketAnnotationMethodMessageHandler - Unhandled exception from message handler method
com.transport.exception.AppException: Bạn không có quyền truy cập.
	at com.transport.service.authentication.auth.AuthenticationServiceImpl.getCurrentUser(AuthenticationServiceImpl.java:101)
	at com.transport.controller.ChatController.addUser(ChatController.java:91)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:169)
	at org.springframework.messaging.handler.invocation.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:119)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMatch(AbstractMethodMessageHandler.java:568)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:530)
	at org.springframework.messaging.simp.annotation.support.SimpAnnotationMethodMessageHandler.handleMatch(SimpAnnotationMethodMessageHandler.java:93)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessageInternal(AbstractMethodMessageHandler.java:522)
	at org.springframework.messaging.handler.invocation.AbstractMethodMessageHandler.handleMessage(AbstractMethodMessageHandler.java:457)
	at org.springframework.messaging.support.ExecutorSubscribableChannel$SendTask.run(ExecutorSubscribableChannel.java:152)
	at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1144)
	at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:642)
	at java.base/java.lang.Thread.run(Thread.java:1583)
2025-11-13 11:04:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:04:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:04:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:38 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 11:04:42 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:42 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:42 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:42 [clientInboundChannel-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:42 [clientInboundChannel-2] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 11:04:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:04:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:04:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:47 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 11:04:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:04:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:04:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:04:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:04:51 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select cm1_0.id,cm1_0.content,cm1_0.created_at,cm1_0.recipient_id,cm1_0.room,cm1_0.sender_id,cm1_0.type from chat_messages cm1_0 where (cm1_0.sender_id=? and cm1_0.recipient_id=?) or (cm1_0.sender_id=? and cm1_0.recipient_id=?) order by cm1_0.created_at desc,cm1_0.created_at desc limit ?
2025-11-13 11:04:56 [MessageBroker-8] INFO  o.s.w.s.c.WebSocketMessageBrokerStats - WebSocketSession[2 current WS(2)-HttpStream(0)-HttpPoll(0), 3 total, 0 closed abnormally (0 connect failure, 0 send limit, 0 transport error)], stompSubProtocol[processed CONNECT(3)-CONNECTED(3)-DISCONNECT(0)], stompBrokerRelay[null], inboundChannel[pool size = 16, active threads = 0, queued tasks = 0, completed tasks = 39], outboundChannel[pool size = 4, active threads = 0, queued tasks = 0, completed tasks = 4], sockJsScheduler[pool size = 8, active threads = 1, queued tasks = 3, completed tasks = 14]
2025-11-13 11:05:06 [clientInboundChannel-17] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:05:06 [clientInboundChannel-17] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:05:06 [clientInboundChannel-17] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=?
2025-11-13 11:05:06 [clientInboundChannel-17] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:05:06 [clientInboundChannel-17] DEBUG org.hibernate.SQL - insert into chat_messages (content,created_at,recipient_id,room,sender_id,type) values (?,?,?,?,?,?)
2025-11-13 11:19:51 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 11:19:51 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 12880 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 11:19:51 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 11:19:52 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 11:19:52 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 11:19:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 11:19:56 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 304 ms. Found 12 JPA repository interfaces.
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:19:57 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 44 ms. Found 0 Redis repository interfaces.
2025-11-13 11:20:00 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 11:20:00 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 11:20:00 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 11:20:00 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 11:20:00 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 11:20:00 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 8691 ms
2025-11-13 11:20:02 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 11:20:04 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@1ed9869d
2025-11-13 11:20:04 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 11:20:04 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 11:20:04 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 7 migrations (execution time 00:00.234s)
2025-11-13 11:20:04 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 7
2025-11-13 11:20:05 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 11:20:05 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 11:20:05 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 11:20:05 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 11:20:06 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 11:20:07 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 11:20:07 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 11:20:11 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 11:20:11 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 11:20:13 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 11:20:16 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 11:20:16 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 11:20:16 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 11:20:16 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 26.232 seconds (process running for 28.311)
2025-11-13 11:21:03 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 11:21:03 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 11:21:03 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 5 ms
2025-11-13 11:21:03 [http-nio-8080-exec-1] WARN  c.t.s.a.token.TokenServiceImpl - Invalid token: Sai tài khoản hoặc mật khẩu
2025-11-13 11:21:03 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
org.springframework.security.authentication.AuthenticationServiceException: Token introspection failed
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:106)
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:144)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1776)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:975)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:493)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.springframework.security.oauth2.jwt.JwtException: Token introspection failed
	at com.transport.config.CustomJWTDecoder.decode(CustomJWTDecoder.java:40)
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99)
	... 68 common frames omitted
2025-11-13 11:36:38 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 11:36:39 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 15444 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 11:36:39 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 11:36:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 11:36:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 11:36:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 11:36:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 867 ms. Found 12 JPA repository interfaces.
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:36:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 99 ms. Found 0 Redis repository interfaces.
2025-11-13 11:36:47 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 11:36:47 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 11:36:47 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 11:36:47 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 11:36:47 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 11:36:47 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 8455 ms
2025-11-13 11:36:48 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 11:36:50 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@15006aaf
2025-11-13 11:36:50 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 11:36:50 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 11:36:51 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 7 migrations (execution time 00:00.444s)
2025-11-13 11:36:51 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 7
2025-11-13 11:36:51 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 11:36:51 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 11:36:52 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 11:36:52 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 11:36:53 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 11:36:53 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 11:36:53 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 11:36:57 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 11:36:57 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 11:36:59 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 11:37:02 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 11:37:03 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 11:37:03 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 11:37:03 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 24.71 seconds (process running for 26.367)
2025-11-13 11:37:15 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 11:37:15 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 11:37:15 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 3 ms
2025-11-13 11:37:16 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 11:37:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:37:17 [http-nio-8080-exec-2] INFO  c.t.s.a.token.TokenServiceImpl - signerKey: bvkfSG5tgcc6kHcMWz6VpgyEjCmg16w8EzZv5mPs3KT4Tt1lS3AhkkOBE3oabTJ8 
2025-11-13 11:37:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.role_name,r1_1.description from user_roles r1_0 join roles r1_1 on r1_1.role_name=r1_0.role_name where r1_0.user_id=?
2025-11-13 11:37:17 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select p1_0.role_name,p1_1.permission_name,p1_1.description from role_permissions p1_0 join permissions p1_1 on p1_1.permission_name=p1_0.permission_name where p1_0.role_name=?
2025-11-13 11:37:32 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:37:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select sr1_0.id,sr1_0.allowance,sr1_0.base_salary,sr1_0.created_at,sr1_0.deduction,sr1_0.driver_id,sr1_0.is_paid,sr1_0.note,sr1_0.paid_at,sr1_0.report_month,sr1_0.total_distance,sr1_0.total_salary,sr1_0.total_trips,sr1_0.trip_bonus,sr1_0.updated_at from salary_reports sr1_0 where sr1_0.id=?
2025-11-13 11:37:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select t1_0.id,t1_0.actual_arrival_time,t1_0.approval_status,t1_0.approved_at,t1_0.approved_by,t1_0.cancellation_reason,t1_0.cancelled_at,t1_0.cancelled_by,t1_0.cargo_description,t1_0.cargo_weight,t1_0.completed_at,t1_0.created_at,t1_0.created_by,t1_0.departure_time,t1_0.driver_id,t1_0.estimated_arrival_time,t1_0.note,t1_0.route_id,t1_0.status,t1_0.trip_code,t1_0.updated_at,t1_0.vehicle_id from trips t1_0 where t1_0.driver_id=? and t1_0.departure_time between ? and ? order by t1_0.departure_time
2025-11-13 11:37:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select r1_0.id,r1_0.code,r1_0.created_at,r1_0.description,r1_0.destination,r1_0.distance_km,r1_0.estimated_duration_hours,r1_0.estimated_fuel_cost,r1_0.is_active,r1_0.name,r1_0.origin,r1_0.updated_at from routes r1_0 where r1_0.id=?
2025-11-13 11:37:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:37:33 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 left join drivers d1_0 on u1_0.id=d1_0.id where u1_0.id=?
2025-11-13 11:39:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:39:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select sr1_0.id,sr1_0.allowance,sr1_0.base_salary,sr1_0.created_at,sr1_0.deduction,sr1_0.driver_id,sr1_0.is_paid,sr1_0.note,sr1_0.paid_at,sr1_0.report_month,sr1_0.total_distance,sr1_0.total_salary,sr1_0.total_trips,sr1_0.trip_bonus,sr1_0.updated_at from salary_reports sr1_0 where sr1_0.id=?
2025-11-13 11:39:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select t1_0.id,t1_0.actual_arrival_time,t1_0.approval_status,t1_0.approved_at,t1_0.approved_by,t1_0.cancellation_reason,t1_0.cancelled_at,t1_0.cancelled_by,t1_0.cargo_description,t1_0.cargo_weight,t1_0.completed_at,t1_0.created_at,t1_0.created_by,t1_0.departure_time,t1_0.driver_id,t1_0.estimated_arrival_time,t1_0.note,t1_0.route_id,t1_0.status,t1_0.trip_code,t1_0.updated_at,t1_0.vehicle_id from trips t1_0 where t1_0.driver_id=? and t1_0.departure_time between ? and ? order by t1_0.departure_time
2025-11-13 11:39:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select r1_0.id,r1_0.code,r1_0.created_at,r1_0.description,r1_0.destination,r1_0.distance_km,r1_0.estimated_duration_hours,r1_0.estimated_fuel_cost,r1_0.is_active,r1_0.name,r1_0.origin,r1_0.updated_at from routes r1_0 where r1_0.id=?
2025-11-13 11:39:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:39:53 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 left join drivers d1_0 on u1_0.id=d1_0.id where u1_0.id=?
2025-11-13 11:40:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:40:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select sr1_0.id,sr1_0.allowance,sr1_0.base_salary,sr1_0.created_at,sr1_0.deduction,sr1_0.driver_id,sr1_0.is_paid,sr1_0.note,sr1_0.paid_at,sr1_0.report_month,sr1_0.total_distance,sr1_0.total_salary,sr1_0.total_trips,sr1_0.trip_bonus,sr1_0.updated_at from salary_reports sr1_0 where sr1_0.id=?
2025-11-13 11:40:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select t1_0.id,t1_0.actual_arrival_time,t1_0.approval_status,t1_0.approved_at,t1_0.approved_by,t1_0.cancellation_reason,t1_0.cancelled_at,t1_0.cancelled_by,t1_0.cargo_description,t1_0.cargo_weight,t1_0.completed_at,t1_0.created_at,t1_0.created_by,t1_0.departure_time,t1_0.driver_id,t1_0.estimated_arrival_time,t1_0.note,t1_0.route_id,t1_0.status,t1_0.trip_code,t1_0.updated_at,t1_0.vehicle_id from trips t1_0 where t1_0.driver_id=? and t1_0.departure_time between ? and ? order by t1_0.departure_time
2025-11-13 11:40:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select r1_0.id,r1_0.code,r1_0.created_at,r1_0.description,r1_0.destination,r1_0.distance_km,r1_0.estimated_duration_hours,r1_0.estimated_fuel_cost,r1_0.is_active,r1_0.name,r1_0.origin,r1_0.updated_at from routes r1_0 where r1_0.id=?
2025-11-13 11:40:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 11:40:54 [http-nio-8080-exec-9] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 left join drivers d1_0 on u1_0.id=d1_0.id where u1_0.id=?
2025-11-13 11:48:38 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 11:48:38 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 13208 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 11:48:38 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 11:48:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 11:48:39 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 11:48:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 11:48:43 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 986 ms. Found 12 JPA repository interfaces.
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 11:48:44 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 113 ms. Found 0 Redis repository interfaces.
2025-11-13 11:48:48 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 11:48:49 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 11:48:49 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 11:48:49 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 11:48:49 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 11:48:49 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 10423 ms
2025-11-13 11:48:51 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 11:48:53 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@756077e1
2025-11-13 11:48:53 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 11:48:53 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 11:48:53 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 7 migrations (execution time 00:00.312s)
2025-11-13 11:48:53 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 7
2025-11-13 11:48:53 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 11:48:54 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 11:48:54 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 11:48:54 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 11:48:56 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 11:48:56 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 11:48:56 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 11:49:00 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 11:49:00 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 11:49:04 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 11:49:08 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 11:49:08 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 11:49:08 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 11:49:08 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 30.21 seconds (process running for 31.253)
2025-11-13 11:49:29 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 11:49:29 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 11:49:29 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 1 ms
2025-11-13 11:49:30 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 11:49:31 [http-nio-8080-exec-1] DEBUG org.hibernate.SQL - select d1_0.driver_code,u1_0.full_name,v1_0.license_plate,v1_0.model,r1_0.origin,c1_0.name,e1_0.amount,r1_0.estimated_fuel_cost from trips t1_0 left join expenses e1_0 on t1_0.id=e1_0.trip_id join expense_categories c1_0 on c1_0.id=e1_0.category_id join drivers d1_0 on d1_0.id=t1_0.driver_id join users u1_0 on u1_0.id=d1_0.id join vehicles v1_0 on v1_0.id=t1_0.vehicle_id join routes r1_0 on r1_0.id=t1_0.route_id where t1_0.departure_time between ? and ?
2025-11-13 12:03:05 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 12:03:05 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 12724 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 12:03:05 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 12:03:05 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 12:03:05 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 12:03:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 12:03:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 12:03:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 680 ms. Found 12 JPA repository interfaces.
2025-11-13 12:03:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 12:03:10 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 12:03:11 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 85 ms. Found 0 Redis repository interfaces.
2025-11-13 12:03:13 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 12:03:13 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 12:03:13 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 12:03:13 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 12:03:13 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 12:03:13 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 7694 ms
2025-11-13 12:03:14 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 12:03:16 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@6fe5e5d8
2025-11-13 12:03:16 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 12:03:16 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 12:03:16 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 7 migrations (execution time 00:00.183s)
2025-11-13 12:03:16 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 7
2025-11-13 12:03:16 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 12:03:17 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 12:03:17 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 12:03:17 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 12:03:18 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 12:03:18 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 12:03:18 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 12:03:23 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 12:03:23 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 12:03:25 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 12:03:28 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 12:03:28 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 12:03:28 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 12:03:28 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 25.066 seconds (process running for 27.224)
2025-11-13 12:03:33 [http-nio-8080-exec-2] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 12:03:33 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 12:03:33 [http-nio-8080-exec-2] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 2 ms
2025-11-13 12:03:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 12:03:35 [http-nio-8080-exec-2] DEBUG org.hibernate.SQL - select sr1_0.id,sr1_0.allowance,sr1_0.base_salary,sr1_0.created_at,sr1_0.deduction,sr1_0.driver_id,sr1_0.is_paid,sr1_0.note,sr1_0.paid_at,sr1_0.report_month,sr1_0.total_distance,sr1_0.total_salary,sr1_0.total_trips,sr1_0.trip_bonus,sr1_0.updated_at from salary_reports sr1_0 where sr1_0.report_month=?
2025-11-13 15:47:46 [background-preinit] INFO  o.h.validator.internal.util.Version - HV000001: Hibernate Validator 8.0.3.Final
2025-11-13 15:47:46 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 8324 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 15:47:46 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 15:47:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - Devtools property defaults active! Set 'spring.devtools.add-properties' to 'false' to disable
2025-11-13 15:47:46 [restartedMain] INFO  o.s.b.d.e.DevToolsPropertyDefaultsPostProcessor - For additional web related logging consider setting the 'logging.level.web' property to 'DEBUG'
2025-11-13 15:47:51 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 15:47:51 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 15:47:51 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 871 ms. Found 12 JPA repository interfaces.
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:47:52 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 319 ms. Found 0 Redis repository interfaces.
2025-11-13 15:47:55 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 15:47:55 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 15:47:55 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 15:47:55 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 15:47:55 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 15:47:55 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 9681 ms
2025-11-13 15:47:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Starting...
2025-11-13 15:47:59 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-1 - Added connection com.mysql.cj.jdbc.ConnectionImpl@9d5029e
2025-11-13 15:47:59 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Start completed.
2025-11-13 15:47:59 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 15:47:59 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 7 migrations (execution time 00:00.348s)
2025-11-13 15:47:59 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 7
2025-11-13 15:47:59 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 15:48:00 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 15:48:00 [restartedMain] INFO  org.hibernate.Version - HHH000412: Hibernate ORM core version 6.6.29.Final
2025-11-13 15:48:00 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 15:48:02 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 15:48:02 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 15:48:02 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-1)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 15:48:07 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 15:48:07 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 15:48:09 [restartedMain] WARN  o.s.b.a.o.j.JpaBaseConfiguration$JpaWebConfiguration - spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2025-11-13 15:48:13 [restartedMain] INFO  o.s.b.d.a.OptionalLiveReloadServer - LiveReload server is running on port 35729
2025-11-13 15:48:13 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Starting ProtocolHandler ["http-nio-8080"]
2025-11-13 15:48:13 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat started on port 8080 (http) with context path '/'
2025-11-13 15:48:13 [restartedMain] INFO  com.transport.VanchuyenApplication - Started VanchuyenApplication in 28.12 seconds (process running for 30.361)
2025-11-13 15:48:36 [http-nio-8080-exec-1] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring DispatcherServlet 'dispatcherServlet'
2025-11-13 15:48:36 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Initializing Servlet 'dispatcherServlet'
2025-11-13 15:48:36 [http-nio-8080-exec-1] INFO  o.s.web.servlet.DispatcherServlet - Completed initialization in 4 ms
2025-11-13 15:48:36 [http-nio-8080-exec-1] WARN  c.t.s.a.token.TokenServiceImpl - Invalid token: Sai tài khoản hoặc mật khẩu
2025-11-13 15:48:36 [http-nio-8080-exec-1] ERROR o.a.c.c.C.[.[.[.[dispatcherServlet] - Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception
org.springframework.security.authentication.AuthenticationServiceException: Token introspection failed
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:106)
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.authenticate(JwtAuthenticationProvider.java:88)
	at org.springframework.security.authentication.ProviderManager.authenticate(ProviderManager.java:182)
	at org.springframework.security.oauth2.server.resource.web.authentication.BearerTokenAuthenticationFilter.doFilterInternal(BearerTokenAuthenticationFilter.java:144)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
	at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
	at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
	at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374)
	at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
	at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.ServletRequestPathFilter.doFilter(ServletRequestPathFilter.java:52)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebSecurityConfiguration.java:319)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.servlet.handler.HandlerMappingIntrospector.lambda$createCacheFilter$4(HandlerMappingIntrospector.java:267)
	at org.springframework.web.filter.CompositeFilter$VirtualFilterChain.doFilter(CompositeFilter.java:113)
	at org.springframework.web.filter.CompositeFilter.doFilter(CompositeFilter.java:74)
	at org.springframework.security.config.annotation.web.configuration.WebMvcSecurityConfiguration$CompositeFilterChainProxy.doFilter(WebMvcSecurityConfiguration.java:240)
	at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:362)
	at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:278)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:164)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:140)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:483)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:116)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:344)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:398)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:903)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1776)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:975)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:493)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:63)
	at java.base/java.lang.Thread.run(Thread.java:1583)
Caused by: org.springframework.security.oauth2.jwt.JwtException: Token introspection failed
	at com.transport.config.CustomJWTDecoder.decode(CustomJWTDecoder.java:40)
	at org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider.getJwt(JwtAuthenticationProvider.java:99)
	... 68 common frames omitted
2025-11-13 15:48:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 where u1_0.username=? limit ?
2025-11-13 15:48:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 15:48:47 [http-nio-8080-exec-5] INFO  c.t.s.a.token.TokenServiceImpl - signerKey: bvkfSG5tgcc6kHcMWz6VpgyEjCmg16w8EzZv5mPs3KT4Tt1lS3AhkkOBE3oabTJ8 
2025-11-13 15:48:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select r1_0.user_id,r1_1.role_name,r1_1.description from user_roles r1_0 join roles r1_1 on r1_1.role_name=r1_0.role_name where r1_0.user_id=?
2025-11-13 15:48:47 [http-nio-8080-exec-5] DEBUG org.hibernate.SQL - select p1_0.role_name,p1_1.permission_name,p1_1.description from role_permissions p1_0 join permissions p1_1 on p1_1.permission_name=p1_0.permission_name where p1_0.role_name=?
2025-11-13 15:49:00 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 15:49:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select sr1_0.id,sr1_0.allowance,sr1_0.base_salary,sr1_0.created_at,sr1_0.deduction,sr1_0.driver_id,sr1_0.is_paid,sr1_0.note,sr1_0.paid_at,sr1_0.report_month,sr1_0.total_distance,sr1_0.total_salary,sr1_0.total_trips,sr1_0.trip_bonus,sr1_0.updated_at from salary_reports sr1_0 where sr1_0.id=?
2025-11-13 15:49:01 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 15:49:02 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select r1_0.name,count(distinct t1_0.id),coalesce(sum(r1_0.distance_km),?) from trips t1_0 join routes r1_0 on r1_0.id=t1_0.route_id where t1_0.driver_id=? and t1_0.departure_time between ? and ? group by r1_0.id,r1_0.name
2025-11-13 15:49:02 [http-nio-8080-exec-4] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 left join drivers d1_0 on u1_0.id=d1_0.id where u1_0.id=?
2025-11-13 15:49:49 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 15:49:49 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select sr1_0.id,sr1_0.allowance,sr1_0.base_salary,sr1_0.created_at,sr1_0.deduction,sr1_0.driver_id,sr1_0.is_paid,sr1_0.note,sr1_0.paid_at,sr1_0.report_month,sr1_0.total_distance,sr1_0.total_salary,sr1_0.total_trips,sr1_0.trip_bonus,sr1_0.updated_at from salary_reports sr1_0 where sr1_0.id=?
2025-11-13 15:49:49 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 15:49:49 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select r1_0.name,count(distinct t1_0.id),coalesce(sum(r1_0.distance_km),?) from trips t1_0 join routes r1_0 on r1_0.id=t1_0.route_id where t1_0.driver_id=? and t1_0.departure_time between ? and ? group by r1_0.id,r1_0.name
2025-11-13 15:49:49 [http-nio-8080-exec-3] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 left join drivers d1_0 on u1_0.id=d1_0.id where u1_0.id=?
2025-11-13 15:49:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select count(*) from invalidated_tokens it1_0 where it1_0.token_id=?
2025-11-13 15:49:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select sr1_0.id,sr1_0.allowance,sr1_0.base_salary,sr1_0.created_at,sr1_0.deduction,sr1_0.driver_id,sr1_0.is_paid,sr1_0.note,sr1_0.paid_at,sr1_0.report_month,sr1_0.total_distance,sr1_0.total_salary,sr1_0.total_trips,sr1_0.trip_bonus,sr1_0.updated_at from salary_reports sr1_0 where sr1_0.id=?
2025-11-13 15:49:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience from drivers d1_0 where d1_0.id=?
2025-11-13 15:49:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select r1_0.name,count(distinct t1_0.id),coalesce(sum(r1_0.distance_km),?) from trips t1_0 join routes r1_0 on r1_0.id=t1_0.route_id where t1_0.driver_id=? and t1_0.departure_time between ? and ? group by r1_0.id,r1_0.name
2025-11-13 15:49:51 [http-nio-8080-exec-6] DEBUG org.hibernate.SQL - select u1_0.id,u1_0.address,u1_0.avatar_url,u1_0.created_at,u1_0.date_of_birth,d1_0.id,d1_0.base_salary,d1_0.created_at,d1_0.driver_code,d1_0.employment_status,d1_0.license_class,d1_0.license_expiry_date,d1_0.license_issue_date,d1_0.license_number,d1_0.note,d1_0.updated_at,d1_0.years_of_experience,u1_0.full_name,u1_0.id_number,u1_0.is_active,u1_0.password,u1_0.phone,u1_0.updated_at,u1_0.username from users u1_0 left join drivers d1_0 on u1_0.id=d1_0.id where u1_0.id=?
2025-11-13 15:51:43 [File Watcher] INFO  o.s.b.d.a.LocalDevToolsAutoConfiguration$RestartingClassPathChangeChangedEventListener - Restarting due to 5 class path changes (0 additions, 4 deletions, 1 modification)
2025-11-13 15:51:43 [Thread-5] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Commencing graceful shutdown. Waiting for active requests to complete
2025-11-13 15:51:43 [tomcat-shutdown] INFO  o.a.coyote.http11.Http11NioProtocol - Pausing ProtocolHandler ["http-nio-8080"]
2025-11-13 15:51:44 [tomcat-shutdown] INFO  o.s.b.w.e.tomcat.GracefulShutdown - Graceful shutdown complete
2025-11-13 15:51:44 [Thread-5] INFO  o.a.coyote.http11.Http11NioProtocol - Stopping ProtocolHandler ["http-nio-8080"]
2025-11-13 15:51:44 [Thread-5] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 15:51:44 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown initiated...
2025-11-13 15:51:44 [Thread-5] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-1 - Shutdown completed.
2025-11-13 15:51:44 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 8324 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 15:51:44 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
2025-11-13 15:51:49 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 581 ms. Found 12 JPA repository interfaces.
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.driver.DriverRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expenseCategory.ExpenseCategoryRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.expense.ExpenseRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.invalidate.InvalidateRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.permission.PermissionRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.role.RoleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.route.RouteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.salary.SalaryReportRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.trip.TripRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.user.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicleType.VehicleTypeRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationExtensionSupport - Spring Data Redis - Could not safely identify store assignment for repository candidate interface com.transport.repository.vehicle.VehicleRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository
2025-11-13 15:51:50 [restartedMain] INFO  o.s.d.r.c.RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 165 ms. Found 0 Redis repository interfaces.
2025-11-13 15:51:51 [restartedMain] INFO  o.s.b.w.e.tomcat.TomcatWebServer - Tomcat initialized with port 8080 (http)
2025-11-13 15:51:51 [restartedMain] INFO  o.a.coyote.http11.Http11NioProtocol - Initializing ProtocolHandler ["http-nio-8080"]
2025-11-13 15:51:51 [restartedMain] INFO  o.a.catalina.core.StandardService - Starting service [Tomcat]
2025-11-13 15:51:51 [restartedMain] INFO  o.a.catalina.core.StandardEngine - Starting Servlet engine: [Apache Tomcat/10.1.46]
2025-11-13 15:51:52 [restartedMain] INFO  o.a.c.c.C.[Tomcat].[localhost].[/] - Initializing Spring embedded WebApplicationContext
2025-11-13 15:51:52 [restartedMain] INFO  o.s.b.w.s.c.ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 7280 ms
2025-11-13 15:51:52 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Starting...
2025-11-13 15:51:53 [restartedMain] INFO  com.zaxxer.hikari.pool.HikariPool - HikariPool-2 - Added connection com.mysql.cj.jdbc.ConnectionImpl@29784b7b
2025-11-13 15:51:53 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Start completed.
2025-11-13 15:51:53 [restartedMain] INFO  org.flywaydb.core.FlywayExecutor - Database: jdbc:mysql://localhost:3306/transport_1?createDatabaseIfNotExist=true (MySQL 8.0)
2025-11-13 15:51:53 [restartedMain] INFO  o.f.core.internal.command.DbValidate - Successfully validated 7 migrations (execution time 00:00.143s)
2025-11-13 15:51:53 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Current version of schema `transport_1`: 7
2025-11-13 15:51:53 [restartedMain] INFO  o.f.core.internal.command.DbMigrate - Schema `transport_1` is up to date. No migration necessary.
2025-11-13 15:51:53 [restartedMain] INFO  o.h.jpa.internal.util.LogHelper - HHH000204: Processing PersistenceUnitInfo [name: default]
2025-11-13 15:51:53 [restartedMain] INFO  o.h.c.i.RegionFactoryInitiator - HHH000026: Second-level cache disabled
2025-11-13 15:51:53 [restartedMain] INFO  o.s.o.j.p.SpringPersistenceUnitInfo - No LoadTimeWeaver setup: ignoring JPA class transformer
2025-11-13 15:51:53 [restartedMain] WARN  org.hibernate.orm.deprecation - HHH90000025: MySQLDialect does not need to be specified explicitly using 'hibernate.dialect' (remove the property setting and it will be selected by default)
2025-11-13 15:51:53 [restartedMain] INFO  o.hibernate.orm.connections.pooling - HHH10001005: Database info:
	Database JDBC URL [Connecting through datasource 'HikariDataSource (HikariPool-2)']
	Database driver: undefined/unknown
	Database version: 8.0.30
	Autocommit mode: undefined/unknown
	Isolation level: undefined/unknown
	Minimum pool size: undefined/unknown
	Maximum pool size: undefined/unknown
2025-11-13 15:51:56 [restartedMain] INFO  o.h.e.t.j.p.i.JtaPlatformInitiator - HHH000489: No JTA platform available (set 'hibernate.transaction.jta.platform' to enable JTA platform integration)
2025-11-13 15:51:56 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Initialized JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 15:51:57 [restartedMain] WARN  o.s.b.w.s.c.AnnotationConfigServletWebServerApplicationContext - Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'salaryController' defined in file [D:\ITS\Truck\target\classes\com\transport\controller\SalaryController.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'salaryReportService': Lookup method resolution failed
2025-11-13 15:51:57 [restartedMain] INFO  o.s.o.j.LocalContainerEntityManagerFactoryBean - Closing JPA EntityManagerFactory for persistence unit 'default'
2025-11-13 15:51:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown initiated...
2025-11-13 15:51:57 [restartedMain] INFO  com.zaxxer.hikari.HikariDataSource - HikariPool-2 - Shutdown completed.
2025-11-13 15:51:57 [restartedMain] INFO  o.a.catalina.core.StandardService - Stopping service [Tomcat]
2025-11-13 15:51:57 [restartedMain] INFO  o.s.b.a.l.ConditionEvaluationReportLogger - 

Error starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.
2025-11-13 15:51:57 [restartedMain] ERROR o.s.boot.SpringApplication - Application run failed
org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'salaryController' defined in file [D:\ITS\Truck\target\classes\com\transport\controller\SalaryController.class]: Unsatisfied dependency expressed through constructor parameter 1: Error creating bean with name 'salaryReportService': Lookup method resolution failed
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:804)
	at org.springframework.beans.factory.support.ConstructorResolver.autowireConstructor(ConstructorResolver.java:240)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireConstructor(AbstractAutowireCapableBeanFactory.java:1395)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1232)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.instantiateSingleton(DefaultListableBeanFactory.java:1221)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingleton(DefaultListableBeanFactory.java:1187)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:1123)
	at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:987)
	at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:627)
	at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)
	at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:752)
	at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:439)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:318)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1361)
	at org.springframework.boot.SpringApplication.run(SpringApplication.java:1350)
	at com.transport.VanchuyenApplication.main(VanchuyenApplication.java:12)
	at java.base/jdk.internal.reflect.DirectMethodHandleAccessor.invoke(DirectMethodHandleAccessor.java:103)
	at java.base/java.lang.reflect.Method.invoke(Method.java:580)
	at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:50)
Caused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'salaryReportService': Lookup method resolution failed
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:498)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:368)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:1334)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1229)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:569)
	at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:529)
	at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:339)
	at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:373)
	at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:337)
	at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1698)
	at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1643)
	at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:913)
	at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:791)
	... 24 common frames omitted
Caused by: java.lang.IllegalStateException: Failed to introspect Class [com.transport.service.salary.SalaryReportService] from ClassLoader [org.springframework.boot.devtools.restart.classloader.RestartClassLoader@706a2466]
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:483)
	at org.springframework.util.ReflectionUtils.doWithLocalMethods(ReflectionUtils.java:320)
	at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.checkLookupMethods(AutowiredAnnotationBeanPostProcessor.java:476)
	... 37 common frames omitted
Caused by: java.lang.NoClassDefFoundError: SalaryReportDetailResponse
	at java.base/java.lang.Class.getDeclaredMethods0(Native Method)
	at java.base/java.lang.Class.privateGetDeclaredMethods(Class.java:3578)
	at java.base/java.lang.Class.getDeclaredMethods(Class.java:2676)
	at org.springframework.util.ReflectionUtils.getDeclaredMethods(ReflectionUtils.java:465)
	... 39 common frames omitted
Caused by: java.lang.ClassNotFoundException: SalaryReportDetailResponse
	at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
	at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	at java.base/java.lang.Class.forName0(Native Method)
	at java.base/java.lang.Class.forName(Class.java:534)
	at java.base/java.lang.Class.forName(Class.java:513)
	at org.springframework.boot.devtools.restart.classloader.RestartClassLoader.loadClass(RestartClassLoader.java:121)
	at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:526)
	... 43 common frames omitted
2025-11-13 15:52:00 [restartedMain] INFO  com.transport.VanchuyenApplication - Starting VanchuyenApplication using Java 21.0.7 with PID 8324 (D:\ITS\Truck\target\classes started by LENOVO in D:\ITS\Truck)
2025-11-13 15:52:00 [restartedMain] INFO  com.transport.VanchuyenApplication - The following 1 profile is active: "pro"
